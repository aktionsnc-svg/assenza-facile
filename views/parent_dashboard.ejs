<!DOCTYPE html>
<html>
  <head>
    <title>Dashboard Genitore</title>
    <style>
      body { font-family: Arial; margin: 40px; }
      ul { list-style: none; padding: 0; }
      li { margin: 6px 0; }
      form.inline { display: inline; margin-left: 8px; }
      .card { border: 1px solid #ddd; padding: 16px; border-radius: 8px; margin-bottom: 20px; }
    </style>
  </head>
  <body>
    <h2>Ciao, <%= user.name %>!</h2>
    <p>Figlio: <b><%= user.childName %></b> — Categoria: <b><%= user.category %></b></p>

    <div class="card">
      <h3>Prossimi allenamenti (2 settimane)</h3>
      <% if (!upcoming || upcoming.length === 0) { %>
        <p>Nessun allenamento programmato per la tua categoria.</p>
      <% } else { %>
        <ul>
          <% upcoming.forEach(e => { %>
            <li>
              <%= e.date %>
              <form class="inline" method="POST" action="/parent/<%= user.email %>/absent">
                <input type="hidden" name="date" value="<%= e.date %>">
                <button type="submit">Segnala assenza</button>
              </form>
            </li>
          <% }) %>
        </ul>
      <% } %>
    </div>

    <div class="card">
      <h3>Assenze già segnalate</h3>
      <ul>
        <% (absences || []).filter(a => a.email === user.email).forEach(a => { %>
          <li><%= a.date %></li>
        <% }) %>
      </ul>
    </div>

    <a href="/login">Logout</a>
  </body>
</html>



    <div class="card">
      <h3>Assenze già segnalate</h3>
      <ul>
        <% (absences || []).filter(a => a.email === user.email).forEach(a => { %>
          <li><%= a.date %></li>
        <% }) %>
      </ul>
    </div>

    <a href="/login">Logout</a>
  </body>
</html>
